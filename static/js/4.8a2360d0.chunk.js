(this.webpackJsonpsamurai=this.webpackJsonpsamurai||[]).push([[4],{235:function(e,t,s){e.exports={formControlError:"FormsControls_formControlError__VBZAh",formSummaryError:"FormsControls_formSummaryError__1zq_V"}},236:function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return j}));var n=s(2),a=s(64),r=(s(0),s(235)),o=s.n(r),i=s(115),c=s(3),u=function(e){e.input;var t=e.meta,s=Object(a.a)(e,["input","meta"]),n=t.error&&t.touched;return Object(c.jsxs)("div",{className:n?o.a.formControlError:"",children:[Object(c.jsx)("div",{children:s.children}),Object(c.jsx)("div",{children:n&&Object(c.jsx)("span",{children:t.error})})]})},l=function(e){var t=e.input,s=(e.meta,e.children,Object(a.a)(e,["input","meta","children"]));return Object(c.jsx)(u,Object(n.a)(Object(n.a)({},e),{},{children:Object(c.jsx)("textarea",Object(n.a)(Object(n.a)({},t),s))}))},d=function(e){var t=e.input,s=(e.meta,e.children,Object(a.a)(e,["input","meta","children"]));return Object(c.jsx)(u,Object(n.a)(Object(n.a)({},e),{},{children:Object(c.jsx)("input",Object(n.a)(Object(n.a)({},t),s))}))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0;return Object(c.jsxs)("div",{className:u,children:[Object(c.jsx)(i.a,Object(n.a)(Object(n.a)({placeholder:e,name:t,validate:s,component:a},r),{},{className:l})),o]})}},238:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));var n=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},239:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(66);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var s=[],n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(s.push(o.value),!t||s.length!==t);n=!0);}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return s}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},248:function(e,t,s){e.exports={backgroundImage:"ProfileInfo_backgroundImage__iHHtU",button:"ProfileInfo_button__1_20o",userInfoSection:"ProfileInfo_userInfoSection__1yOV0",editModeContainer:"ProfileInfo_editModeContainer__1d4gh",editFormContainer:"ProfileInfo_editFormContainer__2H2VP",editModeContacts:"ProfileInfo_editModeContacts__3RUP4",editModeInput:"ProfileInfo_editModeInput__3AD2C",userDescription:"ProfileInfo_userDescription__ZKYvt",userName:"ProfileInfo_userName__29-Sk",userInfoText:"ProfileInfo_userInfoText__1J8O8",flexContainer:"ProfileInfo_flexContainer__jxKq8",contactsSection:"ProfileInfo_contactsSection__at-Bh",contactText:"ProfileInfo_contactText__AlN6a",userAvatarSection:"ProfileInfo_userAvatarSection__32LX5",userAvatar:"ProfileInfo_userAvatar__2va4n",inputFileButtonContainer:"ProfileInfo_inputFileButtonContainer__2EVC7",inputFile:"ProfileInfo_inputFile___elsh",statusContainer:"ProfileInfo_statusContainer__1__vp"}},262:function(e,t,s){e.exports={myPostsSection:"MyPosts_myPostsSection__1cMKZ",myPostsTitle:"MyPosts_myPostsTitle__3x53q",newPostSection:"MyPosts_newPostSection__3HZAh",newPostCreateField:"MyPosts_newPostCreateField__3vwDe",sendPostBtn:"MyPosts_sendPostBtn__63DKz"}},317:function(e,t,s){e.exports={status:"ProfileStatus_status__3Up4H",editStatus:"ProfileStatus_editStatus__14DDY"}},318:function(e,t,s){e.exports={post:"Post_post__BjSSn",avatar:"Post_avatar__3K7IG",textBlock:"Post_textBlock__22kfL",userMessage:"Post_userMessage__2-Df0",likesWrapper:"Post_likesWrapper__1Idzj",likesCount:"Post_likesCount__1Za8B"}},323:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s(35),r=s(36),o=s(38),i=s(37),c=s(0),u=s.n(c),l=s(239),d=s(248),j=s.n(d),f=s(67),b=s(62),p=s.p+"static/media/7zHH.d033fd4a.gif",h=s(236),m=s(116),O=s(235),v=s.n(O),x=s(50),_=s(3),P=Object(m.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.profile,n=e.error;return Object(_.jsxs)("form",{onSubmit:t,className:j.a.editFormContainer,children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:Object(_.jsx)(x.a,{type:"submit",className:j.a.button,children:"Save info"})}),n&&Object(_.jsx)("div",{className:v.a.formSummaryError,children:n}),Object(_.jsxs)("div",{className:j.a.userInfoText,children:[Object(_.jsx)("span",{className:j.a.userInfoText,children:"Full name: "}),Object(h.c)("Full name","fullName",[],h.a,{},"","",j.a.editModeInput)]}),Object(_.jsxs)("div",{className:j.a.flexContainer,children:[Object(_.jsx)("span",{className:j.a.userInfoText,children:"Looking for a job: "}),Object(_.jsx)("div",{className:j.a.editModeInput,children:Object(h.c)("","lookingForAJob",[],h.a,{type:"checkbox"},"","","")})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:j.a.userInfoText,children:"Skills: "}),Object(h.c)("Skills","lookingForAJobDescription",[],h.b,{},"","",j.a.editModeInput)]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:j.a.userInfoText,children:"About me: "}),Object(h.c)("About me","aboutMe",[],h.b,{},"","",j.a.editModeInput)]})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:j.a.editModeContacts,children:"Contacts"}),Object.keys(s.contacts).map((function(e){return Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:j.a.userInfoText,children:e}),": ",Object(h.c)(e,"contacts.".concat(e),[],h.a,{},"","",j.a.editModeInput)]},e)}))]})]})})),S=s(317),g=s.n(S),I=function(e){Object(o.a)(s,e);var t=Object(i.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,status:e.props.status,isOwner:e.props.isOwner},e.activateEditMode=function(){e.state.isOwner&&e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(r.a)(s,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(_.jsx)("div",{children:this.state.editMode?Object(_.jsx)("div",{children:Object(_.jsx)("input",{autoFocus:!0,onChange:this.onStatusChange,onBlur:this.deactivateEditMode,value:this.state.status,className:g.a.editStatus})}):Object(_.jsx)("div",{children:Object(_.jsx)("span",{className:g.a.status,onClick:this.activateEditMode,children:this.props.status||"Status is not set"})})})}}]),s}(u.a.Component),y=function(e){var t=e.contactTitle,s=e.contactValue;return Object(_.jsxs)("div",{className:j.a.contactText,children:[t,": ",s]})},N=function(e){var t=e.profile,s=e.isOwner,n=e.enableEditMode;return Object(_.jsxs)("div",{className:j.a.userDescription,children:[s&&Object(_.jsx)("div",{children:Object(_.jsx)(x.a,{onClick:n,className:j.a.button,children:"Edit info"})}),Object(_.jsx)("div",{className:j.a.userName,children:t.fullName?t.fullName:"information is absent"}),Object(_.jsxs)("div",{className:j.a.userInfoText,children:["Looking for a job: ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJobDescription&&Object(_.jsxs)("div",{className:j.a.userInfoText,children:["Skills: ",t.lookingForAJobDescription]}),t.aboutMe&&Object(_.jsxs)("div",{className:j.a.userInfoText,children:["About me: ",t.aboutMe]}),!Object.keys(t.contacts).map((function(e){return t.contacts[e]})).every((function(e){return null===e}))&&Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:j.a.contactsSection,children:"Contacts: "}),Object.keys(t.contacts).map((function(e){return t.contacts[e]?Object(_.jsx)(y,{contactTitle:e,contactValue:t.contacts[e]},e):null}))]})]})},C=function(e){var t=e.profile,s=e.isOwner,n=e.status,a=e.updateStatus,r=e.savePhoto,o=e.saveProfile,i=Object(c.useState)(!1),u=Object(l.a)(i,2),d=u[0],h=u[1];if(!t)return Object(_.jsx)(f.a,{});return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:Object(_.jsx)("img",{className:j.a.backgroundImage,src:p,alt:"Background"})}),Object(_.jsxs)("div",{className:j.a.userInfoSection,children:[Object(_.jsxs)("div",{className:j.a.userAvatarSection,children:[Object(_.jsx)("img",{className:j.a.userAvatar,src:t.photos.large||b.a,alt:t.fullName+" user avatar"}),s&&Object(_.jsxs)("div",{className:j.a.inputFileButtonContainer,children:[Object(_.jsx)("input",{type:"file",name:"file",id:"file",className:j.a.inputFile,onChange:function(e){var t;1===(null===(t=e.target.files)||void 0===t?void 0:t.length)&&r(e.target.files[0])}}),Object(_.jsx)("label",{htmlFor:"file",children:"Change avatar"})]})]}),Object(_.jsxs)("div",{className:j.a.editModeContainer,children:[Object(_.jsx)("div",{className:j.a.statusContainer,children:Object(_.jsx)(I,{status:n,updateStatus:a,isOwner:s})}),d?Object(_.jsx)(P,{onSubmit:function(e){o(e).then((function(){h(!1)}))},profile:t,initialValues:t}):Object(_.jsx)(N,{profile:t,isOwner:s,enableEditMode:function(){return h(!0)}})]})]})]})},k=s(69),M=s(262),w=s.n(M),A=s(318),F=s.n(A),T=function(e){var t=e.message,s=e.likesCount,n=e.userAvatar;return Object(_.jsxs)("div",{className:F.a.post,children:[Object(_.jsx)("div",{className:F.a.avatar,children:Object(_.jsx)("img",{src:n||b.a,alt:"user avatar"})}),Object(_.jsxs)("div",{className:F.a.textBlock,children:[Object(_.jsx)("p",{className:F.a.userMessage,children:t}),Object(_.jsx)("div",{className:F.a.likesWrapper,children:Object(_.jsxs)("span",{children:["likes: ",Object(_.jsx)("span",{className:F.a.likesCount,children:s})]})})]})]})},B=s(238),D=Object(B.a)(100),E=Object(m.a)({form:"post"})((function(e){var t=e.handleSubmit;return Object(_.jsxs)("form",{onSubmit:t,children:[Object(h.c)("Share your news here ...","newPostBody",[B.b,D],h.b,{},"","",w.a.newPostCreateField),Object(_.jsx)("div",{children:Object(_.jsx)(x.a,{type:"submit",className:w.a.sendPostBtn,children:"Send"})})]})})),U=u.a.memo((function(e){var t=e.posts.map((function(t,s){return Object(_.jsx)(T,{message:t.message,likesCount:t.likesCount,userAvatar:e.userAvatar},s)}));return e.isOwner?Object(_.jsxs)("div",{className:w.a.myPostsSection,children:[Object(_.jsx)("h3",{className:w.a.myPostsTitle,children:"My posts"}),Object(_.jsx)("div",{className:w.a.newPostSection,children:Object(_.jsx)(E,{onSubmit:function(t){e.addPost(t.newPostBody)}})}),Object(_.jsx)("div",{children:t})]}):null})),J=s(24),V=Object(J.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(Object(k.a)(t))}}}))(U),H=function(e){var t=e.profile,s=e.isOwner,n=e.status,a=e.updateStatus,r=e.savePhoto,o=e.saveProfile;return Object(_.jsxs)("div",{children:[Object(_.jsx)(C,{profile:t,isOwner:s,status:n,updateStatus:a,savePhoto:r,saveProfile:o}),Object(_.jsx)(V,{isOwner:s,userAvatar:null===t||void 0===t?void 0:t.photos.small})]})},z=s(7),K=s(26),Z=function(e){Object(o.a)(s,e);var t=Object(i.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"refreshProfile",value:function(){var e=Number(this.props.match.params.userId);e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),"number"===typeof e&&(this.props.getUserProfile(e),this.props.getStatus(e))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(_.jsx)(H,Object(n.a)(Object(n.a)({},this.props),{},{profile:this.props.profile,isOwner:void 0===this.props.match.params.userId||+this.props.match.params.userId===this.props.currentUser,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),s}(u.a.Component);t.default=Object(K.d)(Object(J.b)((function(e){return{profile:e.profilePage.profile,isOwner:e.profilePage.isOwner,currentUser:e.auth.userId,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:k.d,getStatus:k.c,updateStatus:k.g,savePhoto:k.e,saveProfile:k.f}),z.g)(Z)}}]);
//# sourceMappingURL=4.8a2360d0.chunk.js.map